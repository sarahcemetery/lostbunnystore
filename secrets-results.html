<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lost Bunny Store - Your Little Secrets</title>
    <link rel="stylesheet" href="stylest.css">
</head>
<body>

    <h2>♡ Your Little Secrets</h2>

    <div class="information-results">
        <p><strong>♡ Name:</strong> <span id="name-result"></span></p>
        <p><strong>♡ Sweet Color:</strong> <span id="favorite-color-result"></span></p>
        <p><strong>♡ Stuffed Animal:</strong> <span id="stuffed-animal-result"></span></p>
        <p><strong>♡ Sweet Dreams:</strong> <span id="sweet-dreams-result"></span></p>
        <p><strong>♡ Little Treasures:</strong> <span id="little-treasure-result"></span></p>
    </div>

    <div class="centered-button-container">
        <button id="saveAsImage" class="save-button">Save ♡</button>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script>
        const urlParams = new URLSearchParams(window.location.search);

        document.getElementById('name-result').textContent = urlParams.get('name') || 'Unknown';
        document.getElementById('favorite-color-result').textContent = urlParams.get('favorite-color') || 'Not chosen';

        const stuffedAnimal = urlParams.get('stuffed-animal');
        if (stuffedAnimal === 'Yes') {
            const stuffedType = urlParams.get('stuffed-type') || 'a special kind';
            document.getElementById('stuffed-animal-result').textContent = `Yes, a ${stuffedType}`;
        } else {
            document.getElementById('stuffed-animal-result').textContent = 'No';
        }

        document.getElementById('sweet-dreams-result').textContent = urlParams.get('sweet-dreams') || 'Nothing';

        const treasures = urlParams.getAll('little-treasure');
        const treasureNames = {
            'paci': 'Pacifier',
            'ribbon': 'Ribbon',
            'coloring-page': 'Coloring page'
        };
        const selectedTreasures = treasures.map(t => treasureNames[t]).join(', ') || 'None';
        document.getElementById('little-treasure-result').textContent = selectedTreasures;
        
        const saveAsImageButton = document.getElementById('saveAsImage');
        saveAsImageButton.addEventListener('click', () => {
            html2canvas(document.querySelector('.information-results'), {
                backgroundColor: null,
            }).then(canvas => {
                const link = document.createElement('a');
                link.download = 'my_secrets.png';
                link.href = canvas.toDataURL();
                link.click();
            });
        });
    </script>
</body>
</html>
